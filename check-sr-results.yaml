###############################################################################
#                   check-sr-results.py configuration file                    #
###############################################################################

# Note: for the moment, this checks for SystemReady IR results.
---

check-sr-results-configuration:
tree:
  - file: acs-console.log
    must-contain:
      - Booting `bbr/bsa'
      - Test preparing...
      - Done!
      - BSA Architecture Compliance Suite
      # We explicitly allow the Bsa.efi NOT to complete by NOT looking for the
      # end message. It is only informative and it hits crashes on some
      # platforms.
      - 'EFI stub: Booting Linux Kernel...'
      - Linux version
      - 'Test: UEFI'
      - '/ #'
  - dir: acs_results
    tree:
      - file: result.md
        must-contain:
          - SCT Summary
          - Dropped:|0|
          - Failure:|0|
          - Warning:|0|
          - Dropped by group
          - Failure by group
          - Ignored by group
          - Warning by group
      - dir: app_output
        # This directory was not present when using ACS-IR BETA 0 so make it
        # optional.
        optional:
        tree:
          - file: CapsuleApp_ESRT_table_info.log
            must-contain:
              - ESRT TABLE
          - file: CapsuleApp_FMP_protocol_info.log
            must-contain:
              - FMP DATA
      - dir: fwts
        tree:
          - file: FWTSResults.log
      - dir: linux_dump
        tree:
          - file: lspci.log
            can-be-empty:
      - dir: sct_results
        tree:
          - dir: EfiCompliantBBTest
            tree:
              - file: EfiCompliant.ini
          - dir: Overall
            tree:
              - file: Summary.ekl
              - file: Summary.log
          - dir: Sequence
            tree:
              - file: EBBR_manual.seq
                # ACS-IR BETA 0 only has EBBR.seq, not EBBR_manual.seq so make
                # it optional for now.
                optional:
              - file: EBBR.seq
      - dir: uefi
        tree:
          - file: BsaResults.log
      - dir: uefi_dump
        tree:
          - file: acpiview_l.log
          - file: acpiview.log
          - file: acpiview_r.log
          - file: bcfg.log
            # This file was not present when using ACS-IR BETA 0 so make it
            # optional.
            optional:
          - file: devices.log
          - file: dh.log
          - file: dmpstore.log
          - file: drivers.log
          - file: memmap.log
          - file: pci.log
          - file: smbiosview.log
  - dir: docs
    optional:
  - dir: fw
    tree:
      - file: u-boot-sniff.log
      - file: uefi-sniff.log
        optional:
      - file: capsule-update.log
        optional:
  - dir: manual-results
    optional:
    tree:
      - dir: bsa-linux
        optional:
  - dir: os-logs
  - file: report.txt
