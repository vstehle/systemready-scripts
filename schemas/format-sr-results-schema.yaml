---
$schema: http://json-schema.org/draft-07/schema#
title: SystemReady IR results formatting rules schema
description: |
    SystemReady IR results are expected to conform to a certain format,
    described in https://gitlab.arm.com/systemready/systemready-template.

    The format-sr-results.py scripts formats results, using the
    format-sr-results.yaml configuration file.

    This schema describes requirements on the configuration file. It can be used
    by the valid.py script.

    See the README for details.
definitions:
    subs:
        type: array
        minItems: 1
        uniqueItems: true
        items:
            '$ref': '#/definitions/entry'
    entry:
        type: object
        properties:
            heading:
                type: string
            extract:
                type: object
                properties:
                    filename:
                        type: string
                    find:
                        type: string
                    first-line:
                        type: number
                    last-line:
                        oneOf:
                            - const: null
                            - type: number
                            - type: string
                required:
                    - filename
                    - find
                    # first-line is optional
                    # last-line is optional
            paragraph:
                type: string
            subs:
                '$ref': '#/definitions/subs'
        required:
            - heading
            # extract is optional
            - paragraph
            # subs is optional
type: object
properties:
    format-sr-results-configuration:
        const: null
    subs:
        '$ref': '#/definitions/subs'
required:
    - format-sr-results-configuration
    - subs
